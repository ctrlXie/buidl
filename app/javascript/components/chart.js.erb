const createChart = (id, argChartData, argChartLabels) => {
  var ctx = document.getElementById("product-chart-");

  let chartData = argChartData;
  let chartLabels = argChartLabels;
  console.log("creating chart");

  var ctx = document.getElementById(`product-chart-${id}`).getContext('2d');


  var myChart = new Chart(ctx, {
      type: 'pie',
      data: {
          labels: chartLabels,
          datasets: [{
              label: '# of Votes',
              data: chartData,
              backgroundColor: [
                  '#290B5A',
                  '#C7BDD7',
                  '#0E041E',
                  '#7C65A2',
                  '#200946',
                  '#170632',

                  '#ECE9F1',

                  '#A191BC',

                  '#573987',
                  '#320D6D'
              ],
              borderColor: [
                  'rgba(255,255,255,0.5)',
                  'rgba(255,255,255,0.5)',
                  'rgba(255,255,255,0.5)',
                  'rgba(255,255,255,0.5)',
                  'rgba(255,255,255,0.5)',
                  'rgba(255,255,255,0.5)'
              ],
              borderWidth: 3
          }]
      },
        options: {
          responsive: true,
          legend: {
            display: false,
          },

        }
  });

}




const generateCharts = () => {

  const productCharts = document.querySelectorAll(".js-product-chart");



  productCharts.forEach((productChart) => {

    let id = productChart.dataset.projectid;
    console.log("productChart");

    console.log(typeof productChart.dataset.chartlabeldata);
    console.log(productChart.dataset.chartlabeldata);
    let string = productChart.dataset.chartlabeldata;
    let jsObj = JSON.parse(string);
    console.log(jsObj);

    let chartData = Object.values(jsObj);
    let chartLabels = Object.keys(jsObj);
    console.log(chartLabels);
    console.log(chartData);
    // let chartLabels = productChart.dataset.chartlabel;
    createChart(id, chartData, chartLabels);

  });

}

generateCharts()

export { createChart };
